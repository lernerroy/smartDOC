sap.ui.define(["./BaseController","sap/f/LayoutType","sap/ui/model/json/JSONModel","../utils/formatters"],function(e,t,a,r){"use strict";return e.extend("airportprofile.controller.TaskDetails",{formatter:r,onInit:function(){var e=new a({title:"",selectedTabKey:"airportCharges"});this.setModel(e,"taskDetailsViewModel");var t=new a({airportCharges:[],cargoCharges:[],items:[]});this.setModel(t,"taskDetailsDataModel");this.getRouter().getRoute("TaskDetails").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){this.getModel("appView").setProperty("/mainTabsVisible",true);var a=e.getParameter("arguments");this.getModel("appView").setProperty("/layout",t.TwoColumnsMidExpanded);this.loadData(a.vid)},_getDataModel:function(){return this.getModel("taskDetailsDataModel")},loadData:function(e){var t=this;t.showBusyIndicator(true);var a=this._getDataModel();a.setProperty("/items",[]);const r=`${this.getModel().sServiceUrl}TaskLists`;$.get({url:`${r}(ID=${e},IsActiveEntity=true)/items`,data:{},success:function(e){t.showBusyIndicator(false);t._mapDataToModel(e.value);t._displayItemsBySelectedTabKey()},error:function(e){t.showBusyIndicator(false)}})},_mapDataToModel(e){var t=this._getDataModel();var a=e.filter(function(e){return e.lineOfBusiness==="airport"});var r=e.filter(function(e){return e.lineOfBusiness==="cargo"});t.setProperty("/airportCharges",a);t.setProperty("/cargoCharges",r)},_displayItemsBySelectedTabKey:function(){var e=this._getDataModel();var t=this.getModel("taskDetailsViewModel").getProperty("/selectedTabKey");switch(t){case"airportCharges":e.setProperty("/items",e.getProperty("/airportCharges"));break;case"cargoCharges":e.setProperty("/items",e.getProperty("/cargoCharges"));break}},onLobTabSelected:function(){this._displayItemsBySelectedTabKey()},onBrfButtonPressed:function(e){var t=e.getSource().getParent();var a=t.getBindingContextPath();var r=this.getModel("detailsModel").getProperty(a)},onServicesButtonPressed:function(e){var t=e.getSource().getParent().getBindingContextPath();var a=this._getDataModel().getProperty(t)}})});